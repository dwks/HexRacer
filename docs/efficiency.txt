Possible speed improvements:
- TypedObserver can use a static_cast instead of a dynamic_cast
